{% extends "appboard/base.html" %}
{% block head_title %}
    GIS -Similarity Comparison
{% endblock %}
{% load static %}
{% load leaflet_tags %}

{% block extra_head %}
    <link rel="stylesheet" href="{% static 'gis/css/data-processor.css' %}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.rawgit.com/harvesthq/chosen/gh-pages/chosen.jquery.min.js"></script>
    <link href="https://cdn.rawgit.com/harvesthq/chosen/gh-pages/chosen.min.css" rel="stylesheet"/>
    <script src="//npmcdn.com/geotiff@0.3.6/dist/geotiff.js"></script>
    <script src="//d3js.org/d3.v4.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/chroma-js/2.1.0/chroma.min.js"></script>
    {% leaflet_js plugins="ALL" %}
    {% leaflet_css %}
    <style>
      .leaflet-container { height: 100vh; }

    </style>
{% endblock %}


{% block content %}
<div id="flash-message" class="text-sm ms-5">
    {% if messages %}
    {% for message in messages %}
    {% if message.level == 40 %}
    <span
        class="alert alert-danger text-center p-2"> {{ message }}
    </span>
    {% endif %} {% endfor %} {% endif %}
</div>

<div class="container-fluid content-margin-top-offset w-100 h-100 mb-5" >
    <div class="container p-0 h-100 mb-5">

        <input id="process_id" type="hidden" class="process_id" name="process_id"/>
        <div class="modal fade" id="view_task_modal" data-keyboard="false">
            <div class="modal-dialog modal-dialog-centered modal-md" role="document" id="modal_body">
                <div class="modal-content" id="modal-content">
                </div>
            </div>
        </div>

        <div class="d-flex content-margin-top-offset px-4">
            <h4 class="mb-2 text-ofx-blue">GIS -Similarity Comparison&nbsp <i class="fas fa-fw fa-globe"></i></h4>
        </div>

        <div class="map-wrapper px-4 mb-5 h-80">
            <div class="map-wrapper">
                {% leaflet_map "main" %}
            </div>


           <!-- <form action="{% url 'gis:output_model_result' %}" method="post">
                {% csrf_token %}
                <button class="submit d-none d-sm-inline-block btn bg-ofx-blue text-white shadow-sm" id="submit4" type="submit">Simulate model result</button>
            </form>-->



            <div>
                <h3>Selected Image</h3>
                <img id="selectedImage" src="" alt="Selected Image">
<!--                <button onclick="updateImage()">Update Image</button>-->

                <h3>Result</h3>
                <div id="modelResultText"></div>

                <h3>Location Coordinates </h3>
                <div>
                    <p>Latitude: <span id="latitude"></span></p>
                    <p>Longitude: <span id="longitude"></span></p>
                </div>
            </div>
        </div>




      <!--  <div class="container p-0 h-100 mb-5 d-flex justify-content-between">
            <form id=form_method_selection method="POST" action="{% url 'gis:project_area_input_selection' %}">
                {% csrf_token %}

                <div class="radio-container">

                    <div class="radio-item">
                        <input type="radio" id="radio1" name="area_selection" value="Upload">
                        <label for="radio1">Upload .shp</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="radio2" name="area_selection" value="Enter">
                        <label for="radio2">Enter coordinates</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="radio3" name="area_selection" value="Select">
                        <label for="radio3">Select area</label>
                    </div>
                    <div>
                        <button class="submit d-none d-sm-inline-block btn bg-ofx-blue text-white shadow-sm " id="submit2" type="submit" form="form_method_selection">Search for similarities</button>
                    </div>

                </div>
            </form>


            <form id=form_method_selection_js>
                <div class="radio-container_js">
                    <div class="radio-item_js">
                        <input type="radio" id="radio1_js" name="area_selection_js" value="Upload_js">
                        <label for="radio1">Upload .shp</label>
                    </div>
                    <div class="radio-item_js">
                        <input type="radio" id="radio2_js" name="area_selection_js" value="Enter_js">
                        <label for="radio2">Enter coordinates</label>
                    </div>
                    <div class="radio-item_js">
                        <input type="radio" id="radio3_js" name="area_selection_js" value="Select_js">
                        <label for="radio3">Select area</label>
                    </div>
                    <div>
                        <button class="submit d-none d-sm-inline-block btn bg-ofx-blue text-white shadow-sm " id="submit3" type="submit">Search for similarities</button>
                    </div>

                 </div>

            </form>

            </div>-->


    </div>


</div>

{% endblock %}

{% block extra_body %}
<script>

    let csrf_token = "{{ csrf_token }}"
    var STATIC_URL = "{{ static }}";

</script>

<script src="{% static 'gis/js/compare_tmi.js' %}"></script>
{% endblock %}
